// Terraform Infrastructure - Day 4
// This is a simple DOT file for generating diagrams with Graphviz
// Usage: dot -Tpng infrastructure.dot -o infrastructure.png

digraph terraform_infrastructure {
    rankdir=TB;
    node [shape=box, style=rounded];
    
    // External
    internet [label="ğŸŒ Internet", shape=ellipse, color=blue];
    github [label="ğŸ“¦ GitHub\nRepository", color=green];
    
    // Terraform Cloud
    tf_cloud [label="â˜ï¸ Terraform Cloud\nState & Locking", color=purple];
    
    // DigitalOcean
    subgraph cluster_do {
        label="DigitalOcean";
        style=filled;
        color=lightblue;
        
        droplet [label="ğŸ–¥ï¸ Ubuntu Droplet\nshaku-ka-droplet\ns-1vcpu-1gb\nblr1"];
        do_spaces [label="ğŸ“¦ DO Spaces\n(Optional Backend)"];
    }
    
    // Cloudflare
    subgraph cluster_cf {
        label="Cloudflare";
        style=filled;
        color=orange;
        
        r2_bucket [label="ğŸ—„ï¸ R2 Bucket\nmy-infra\nState Storage"];
        cdn [label="âš¡ CDN/DNS\nServices"];
    }
    
    // Local Development
    subgraph cluster_local {
        label="Local Development";
        style=filled;
        color=lightgray;
        
        tf_files [label="ğŸ“„ Terraform Files\nmain.tf\nbackend.tf\nvariables.tf"];
        tf_state [label="ğŸ’¾ Local State\nterraform.tfstate"];
    }
    
    // Connections
    internet -> droplet;
    internet -> cdn;
    
    github -> tf_files;
    tf_cloud -> tf_files [style=dashed];
    
    tf_files -> droplet [label="provisions"];
    tf_files -> r2_bucket [label="stores state"];
    tf_files -> cdn [label="configures"];
    
    r2_bucket -> tf_state [style=dashed, label="remote state"];
    tf_cloud -> tf_state [style=dashed, label="managed state"];
}